<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Waktu Solat Padang Serai</title>
<style>
body { font-family: Arial, sans-serif; background:#f5f7fa; text-align:center; padding:20px; }
h1 { color:#00695c; }
.card {
  background:white; max-width:420px; margin:auto; border-radius:12px;
  padding:15px; box-shadow:0 2px 10px rgba(0,0,0,0.1);
}
table { width:100%; border-collapse:collapse; margin-top:10px; }
th,td { padding:8px; border-bottom:1px solid #eee; }
th { background:#009688; color:white; }
</style>
</head>
<body>
<h1>Waktu Solat Padang Serai</h1>
<p id="tarikh"></p>
<div class="card">
  <table>
    <thead><tr><th>Waktu</th><th>Masa</th></tr></thead>
    <tbody id="solat-data"><tr><td colspan="2">Memuat data...</td></tr></tbody>
  </table>
</div>

<script>
async function muatData() {
  const now = new Date();
  const year = now.getFullYear();
  const month = String(now.getMonth()+1).padStart(2,'0');
  const day = String(now.getDate()).padStart(2,'0');
  const today = `${year}-${month}-${day}`;
  
  const url = `https://www.e-solat.gov.my/index.php?r=esolatApi/takwimsolat&period=duration&zone=KDH05&year=${year}&month=${month}`;

  document.getElementById("tarikh").textContent = 
    now.toLocaleDateString("ms-MY", {weekday:"long", day:"numeric", month:"long", year:"numeric"});

  try {
    const res = await fetch(url);
    const json = await res.json();
    const data = json.prayerTime.find(d => d.date === today);

    const tbody = document.getElementById("solat-data");
    tbody.innerHTML = "";

    if (data) {
      const waktu = ["imsak","fajr","syuruk","dhuhr","asr","maghrib","isha"];
      const nama = ["Imsak","Subuh","Syuruk","Zohor","Asar","Maghrib","Isyak"];
      waktu.forEach((k,i)=>{
        const row = document.createElement("tr");
        row.innerHTML = `<td>${nama[i]}</td><td>${data[k]}</td>`;
        tbody.appendChild(row);
      });
    } else {
      tbody.innerHTML = `<tr><td colspan="2">Tiada data untuk tarikh ini.</td></tr>`;
    }

  } catch (err) {
    document.getElementById("solat-data").innerHTML =
      `<tr><td colspan="2">Gagal muat data dari e-Solat.</td></tr>`;
    console.error(err);
  }
}

muatData();
</script>
</body>
</html>